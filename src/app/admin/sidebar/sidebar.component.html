<!-- Desktop Sidebar -->
<div class="hidden lg:flex w-64 bg-gradient-to-b from-primary to-accent text-white shadow-lg flex-col fixed left-0 top-0 h-screen z-30">
  <div class="p-6 flex-1 overflow-y-auto">
    <!-- Header -->
    <div class="flex items-center space-x-3 mb-8">
      <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center text-primary font-bold">
        <i class="fas fa-crown"></i>
      </div>
      <h1 class="text-xl font-bold">Admin Portal</h1>
    </div>

    <!-- Refresh Button -->
    <button (click)="refreshCounts()" 
            [disabled]="isLoadingCounts"
            class="w-full mb-4 flex items-center justify-center space-x-2 p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-all duration-300 text-sm disabled:opacity-50 disabled:cursor-not-allowed">
      <i [class.fa-spin]="isLoadingCounts" class="fas fa-sync-alt"></i>
      <span>{{ isLoadingCounts ? 'Refreshing...' : 'Refresh Counts' }}</span>
    </button>
    
    <!-- Navigation -->
    <nav class="space-y-2">
      <!-- Dashboard -->
      <a routerLink="/dashboard" 
         routerLinkActive="bg-white/20 font-semibold"
         [routerLinkActiveOptions]="{exact: true}"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-tachometer-alt w-5"></i>
        <span>Dashboard</span>
      </a>

      <!-- Users -->
      <a routerLink="/users" 
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-users w-5"></i>
        <span>Users</span>
        <span *ngIf="counts.users > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.users }}
        </span>
        <span *ngIf="isLoadingCounts && counts.users === 0" class="ml-auto">
          <i class="fas fa-spinner fa-spin text-xs"></i>
        </span>
      </a>

      <!-- Events -->
      <a routerLink="/adminEvents" 
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-calendar-alt w-5"></i>
        <span>Events</span>
        <span *ngIf="counts.events > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.events }}
        </span>
        <span *ngIf="isLoadingCounts && counts.events === 0" class="ml-auto">
          <i class="fas fa-spinner fa-spin text-xs"></i>
        </span>
      </a>

      <!-- Jobs -->
      <a routerLink="/adminJob" 
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-briefcase w-5"></i>
        <span>Jobs</span>
        <span *ngIf="counts.jobs > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.jobs }}
        </span>
        <span *ngIf="isLoadingCounts && counts.jobs === 0" class="ml-auto">
          <i class="fas fa-spinner fa-spin text-xs"></i>
        </span>
      </a>

      <!-- Forums -->
      <a routerLink="/adminForum" 
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-comments w-5"></i>
        <span>Forums</span>
        <span *ngIf="counts.forums > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.forums }}
        </span>
        <span *ngIf="isLoadingCounts && counts.forums === 0" class="ml-auto">
          <i class="fas fa-spinner fa-spin text-xs"></i>
        </span>
      </a>

      <!-- News -->
      <a routerLink="/adminNews" 
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-newspaper w-5"></i>
        <span>News</span>
        <span *ngIf="counts.news > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.news }}
        </span>
        <span *ngIf="isLoadingCounts && counts.news === 0" class="ml-auto">
          <i class="fas fa-spinner fa-spin text-xs"></i>
        </span>
      </a>


      
      <!-- Tracer -->
      <a routerLink="/adminTracer" 
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-newspaper w-5"></i>
        <span>Tracer</span>
      </a>

      <!-- Reports -->
      <a routerLink="/reports" 
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-chart-bar w-5"></i>
        <span>Reports</span>
      </a>

      <!-- Settings -->
      <a routerLink="/settings" 
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-cog w-5"></i>
        <span>Settings</span>
      </a>
    </nav>
  </div>
  
  <!-- User Profile Section -->
  <div class="p-6 border-t border-white/20">
    <div class="flex items-center space-x-3 mb-4">
      <!-- User Avatar -->
      <div *ngIf="!currentUser?.profile_picture" 
           class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-primary font-bold text-sm">
        {{ getUserInitials() }}
      </div>
      <img *ngIf="currentUser?.profile_picture"
           [src]="currentUser?.profile_picture || ''"
           [alt]="getUserFullName()"
           class="w-10 h-10 rounded-full object-cover border-2 border-white/20">
      
      <!-- User Info -->
      <div class="flex-1 min-w-0">
        <p class="font-medium truncate">{{ getUserFullName() }}</p>
        <p class="text-sm opacity-80 truncate">{{ getUserRole() }}</p>
      </div>
    </div>

    <!-- Logout Button -->
    <button (click)="logout()"
            class="w-full flex items-center justify-center space-x-2 p-2 rounded-lg hover:bg-white/10 transition-all duration-300">
      <i class="fas fa-sign-out-alt"></i>
      <span>Logout</span>
    </button>
  </div>
</div>

<!-- Mobile Menu Button -->
<button (click)="toggleMobileMenu()"
        class="lg:hidden fixed top-4 left-4 z-50 w-10 h-10 bg-primary text-white rounded-lg flex items-center justify-center shadow-lg">
  <i [class.fa-times]="isMobileMenuOpen" [class.fa-bars]="!isMobileMenuOpen" class="fas"></i>
</button>

<!-- Mobile Sidebar Overlay -->
<div *ngIf="isMobileMenuOpen" 
     (click)="closeMobileMenu()"
     class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300">
</div>

<!-- Mobile Sidebar -->
<div [class.translate-x-0]="isMobileMenuOpen"
     [class.-translate-x-full]="!isMobileMenuOpen"
     class="lg:hidden fixed left-0 top-0 h-screen w-64 bg-gradient-to-b from-primary to-accent text-white shadow-lg z-40 transform transition-transform duration-300 ease-in-out flex flex-col">
  <div class="p-6 flex-1 overflow-y-auto">
    <!-- Header -->
    <div class="flex items-center space-x-3 mb-8">
      <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center text-primary font-bold">
        <i class="fas fa-crown"></i>
      </div>
      <h1 class="text-xl font-bold">Admin Portal</h1>
    </div>

    <!-- Refresh Button -->
    <button (click)="refreshCounts()" 
            [disabled]="isLoadingCounts"
            class="w-full mb-4 flex items-center justify-center space-x-2 p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-all duration-300 text-sm disabled:opacity-50 disabled:cursor-not-allowed">
      <i [class.fa-spin]="isLoadingCounts" class="fas fa-sync-alt"></i>
      <span>{{ isLoadingCounts ? 'Refreshing...' : 'Refresh Counts' }}</span>
    </button>
    
    <!-- Navigation -->
    <nav class="space-y-2">
      <!-- Dashboard -->
      <a routerLink="/dashboard" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         [routerLinkActiveOptions]="{exact: true}"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-tachometer-alt w-5"></i>
        <span>Dashboard</span>
      </a>

      <!-- Users -->
      <a routerLink="/users" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-users w-5"></i>
        <span>Users</span>
        <span *ngIf="counts.users > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.users }}
        </span>
      </a>

      <!-- Events -->
      <a routerLink="/adminEvents" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-calendar-alt w-5"></i>
        <span>Events</span>
        <span *ngIf="counts.events > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.events }}
        </span>
      </a>

      <!-- Jobs -->
      <a routerLink="/adminJob" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-briefcase w-5"></i>
        <span>Jobs</span>
        <span *ngIf="counts.jobs > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.jobs }}
        </span>
      </a>

      <!-- Forums -->
      <a routerLink="/adminForum" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-comments w-5"></i>
        <span>Forums</span>
        <span *ngIf="counts.forums > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.forums }}
        </span>
      </a>

      <!-- News -->
      <a routerLink="/adminNews" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-newspaper w-5"></i>
        <span>News</span>
        <span *ngIf="counts.news > 0" class="ml-auto bg-white/20 text-xs px-2 py-1 rounded-full">
          {{ counts.news }}
        </span>
      </a>


      <!-- Tracer -->
      <a routerLink="/adminTracer" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-newspaper w-5"></i>
        <span>Tracer</span>
      </a>


      <!-- Reports -->
      <a routerLink="/reports" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-chart-bar w-5"></i>
        <span>Reports</span>
      </a>

      <!-- Settings -->
      <a routerLink="/settings" 
         (click)="closeMobileMenu()"
         routerLinkActive="bg-white/20 font-semibold"
         class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-all duration-300">
        <i class="fas fa-cog w-5"></i>
        <span>Settings</span>
      </a>
    </nav>
  </div>
  
  <!-- User Profile Section -->
  <div class="p-6 border-t border-white/20">
    <div class="flex items-center space-x-3 mb-4">
      <!-- User Avatar -->
      <div *ngIf="!currentUser?.profile_picture" 
           class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-primary font-bold text-sm">
        {{ getUserInitials() }}
      </div>
      <img *ngIf="currentUser?.profile_picture"
           [src]="currentUser?.profile_picture || ''"
           [alt]="getUserFullName()"
           class="w-10 h-10 rounded-full object-cover border-2 border-white/20">
      
      <!-- User Info -->
      <div class="flex-1 min-w-0">
        <p class="font-medium truncate">{{ getUserFullName() }}</p>
        <p class="text-sm opacity-80 truncate">{{ getUserRole() }}</p>
      </div>
    </div>

    <!-- Logout Button -->
    <button (click)="logout()"
            class="w-full flex items-center justify-center space-x-2 p-2 rounded-lg hover:bg-white/10 transition-all duration-300">
      <i class="fas fa-sign-out-alt"></i>
      <span>Logout</span>
    </button>
  </div>
</div>